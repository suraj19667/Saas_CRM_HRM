{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="content-header">
    <h1>Order Details - {{ tenant.name }}</h1>
</div>
<div class="card">
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Company</dt>
            <dd class="col-sm-9">{{ tenant.name }}</dd>

            <dt class="col-sm-3">Plan</dt>
            <dd class="col-sm-9">{% if plan %}{{ plan.name }} (₹{{ plan.price_monthly }}){% else %}-{% endif %}</dd>

            <dt class="col-sm-3">Plan Active</dt>
            <dd class="col-sm-9">{% if plan and plan.status %}Yes{% else %}No{% endif %}</dd>

            <dt class="col-sm-3">Subscription Start</dt>
            <dd class="col-sm-9">{% if tenant.subscription_start_date %}{{ tenant.subscription_start_date|date:"Y-m-d H:i" }}{% else %}-{% endif %}</dd>

            <dt class="col-sm-3">Subscription End</dt>
            <dd class="col-sm-9">{% if tenant.subscription_end_date %}{{ tenant.subscription_end_date|date:"Y-m-d H:i" }}{% else %}-{% endif %}</dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9">{{ tenant.status }}</dd>
        </dl>

        <div class="mt-3">
            <a class="btn btn-secondary" href="{% url 'payment:orders_list' %}">Back to Orders</a>
        </div>

        <hr />
        <h5>Recent Transactions</h5>
        <table class="table table-sm mt-2">
            <thead>
                <tr>
                    <th>Txn ID</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for tx in transactions %}
                <tr>
                    <td>{{ tx.razorpay_order_id }}</td>
                    <td>₹{{ tx.amount }}</td>
                    <td>{{ tx.status }}</td>
                    <td>{% if tx.created_at %}{{ tx.created_at|date:"Y-m-d H:i" }}{% else %}-{% endif %}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">No transactions found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
